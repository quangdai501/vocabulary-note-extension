<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vocabulary Note - Debug Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      line-height: 1.6;
    }
    h1 {
      color: #667eea;
    }
    .test-section {
      background: #f5f5f5;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
    }
    .test-word {
      font-size: 24px;
      font-weight: bold;
      color: #333;
      margin: 20px 0;
    }
    .instructions {
      background: #e7f3ff;
      padding: 15px;
      border-left: 4px solid #667eea;
      margin: 20px 0;
    }
    .status {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
    }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
    .info { background: #d1ecf1; color: #0c5460; }
  </style>
</head>
<body>
  <h1>ðŸ§ª Vocabulary Note - Debug & Test Page</h1>
  
  <div class="instructions">
    <h3>How to Test:</h3>
    <ol>
      <li>Make sure the extension is loaded in Chrome</li>
      <li>Open Chrome DevTools (F12) and check the Console tab</li>
      <li>Try selecting words below</li>
      <li>Check for console messages starting with "Vocabulary Note:"</li>
    </ol>
  </div>

  <div class="test-section">
    <h2>Test Words - Select Any Word Below:</h2>
    
    <div class="test-word">serendipity</div>
    <p>A fortunate occurrence by chance.</p>
    
    <div class="test-word">ephemeral</div>
    <p>Lasting for a very short time.</p>
    
    <div class="test-word">ubiquitous</div>
    <p>Present, appearing, or found everywhere.</p>
    
    <div class="test-word">vocabulary</div>
    <p>A body of words used in a particular language.</p>
  </div>

  <div class="test-section">
    <h2>Manual Extension Check:</h2>
    <button onclick="checkExtension()">Check if Extension is Loaded</button>
    <div id="extensionStatus"></div>
  </div>

  <div class="test-section">
    <h2>Expected Behavior:</h2>
    <ul>
      <li>âœ… Select any word above by highlighting it with your mouse</li>
      <li>âœ… An inline popup should appear above the selection</li>
      <li>âœ… Popup should have 3 buttons: Save, Play, YouGlish</li>
      <li>âœ… Console should show: "Vocabulary Note: Text selection detected"</li>
    </ul>
  </div>

  <div class="test-section">
    <h2>Troubleshooting Steps:</h2>
    <ol>
      <li><strong>Check Extension Loaded:</strong>
        <ul>
          <li>Go to <code>chrome://extensions/</code></li>
          <li>Find "Vocabulary Note"</li>
          <li>Make sure it's enabled (toggle switch is blue)</li>
        </ul>
      </li>
      <li><strong>Reload Extension:</strong>
        <ul>
          <li>Click the reload icon on the extension card</li>
          <li>Refresh this page (F5)</li>
          <li>Try selecting words again</li>
        </ul>
      </li>
      <li><strong>Check Console:</strong>
        <ul>
          <li>Open DevTools (F12)</li>
          <li>Go to Console tab</li>
          <li>Look for "Vocabulary Note: Content script loaded"</li>
          <li>If not present, content script isn't loading</li>
        </ul>
      </li>
      <li><strong>Check for Errors:</strong>
        <ul>
          <li>Look for red error messages in Console</li>
          <li>Check the extension's errors in <code>chrome://extensions/</code></li>
          <li>Click "Errors" button if available</li>
        </ul>
      </li>
    </ol>
  </div>

  <script>
    function checkExtension() {
      const statusDiv = document.getElementById('extensionStatus');
      
      // Check if content script added any elements
      const hasVocabularyElements = document.querySelector('.Vocabulary-popup') !== null;
      
      statusDiv.innerHTML = `
        <div class="status info">
          <strong>Checking...</strong>
          <p>Content script elements: ${hasVocabularyElements ? 'Found' : 'Not found'}</p>
          <p>Check the browser console for detailed logs.</p>
        </div>
      `;

      // Log to console
      console.log('=== Vocabulary Note Extension Check ===');
      console.log('Page URL:', window.location.href);
      console.log('Has Vocabulary elements:', hasVocabularyElements);
      console.log('Try selecting a word and check for popup');
    }

    // Log when page loads
    window.addEventListener('load', () => {
      console.log('=== Debug Page Loaded ===');
      console.log('Waiting for content script...');
      
      setTimeout(() => {
        const scripts = Array.from(document.scripts).map(s => s.src);
        console.log('All scripts loaded:', scripts);
      }, 1000);
    });
  </script>
</body>
</html>
